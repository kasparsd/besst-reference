webpackJsonp([29],{2349:function(t,e,n){var i=n(2)(n(2720),n(2721),function(t){n(2718)},null,null);t.exports=i.exports},2421:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(3),a=(i=o)&&i.__esModule?i:{default:i};var r={filter:function(t,e,n){return a.default.HttpHelp.request({method:"POST",url:"/NlInStock/filter",data:t,params:{page:e||0,size:n||10}})},find:function(t,e){return a.default.HttpHelp.request({method:"GET",url:"/NlInStock",data:{page:t||0,size:e||10}})},findAll:function(){return a.default.HttpHelp.request({method:"GET",url:"/NlInStock/all"})},save:function(t){return a.default.HttpHelp.request({method:"POST",url:"/NlInStock",data:t})},remove:function(t){return a.default.HttpHelp.request({method:"DELETE",url:"/NlInStock/"+t})},allStock:function(t,e,n){return a.default.HttpHelp.request({method:"POST",url:"/nl/stockHistoryItem/find",params:{productCode:t.product_code,warehouseCode:t.warehouse_code,page:e||0,size:n||10}})},print:function(t,e){return a.default.HttpHelp.request({method:"POST",url:"/NlInStock/printGrnPdf",data:t,params:e})},filterAll:function(t){return a.default.HttpHelp.request({method:"POST",url:"/NlInStock/filterAll",data:{nl_in_stock_header_id:t}})},saveHeader:function(t){return a.default.HttpHelp.request({header:{"Content-Type":void 0},method:"POST",url:"/NlInStock/save2",data:t})},exportfile:function(t){return a.default.HttpHelp.request({method:"GET",url:"/NlInStock/exportNlInStock",data:t,responseType:"blob"})}};e.default=r},2422:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(3),a=(i=o)&&i.__esModule?i:{default:i};var r={filter:function(t,e,n){return a.default.HttpHelp.request({method:"POST",url:"/NlInStockHeader/filter2",data:t,params:{page:e||0,size:n||10}})},save:function(t){return a.default.HttpHelp.request({method:"POST",url:"/NlInStockHeader/save2",data:t})},remove:function(t){return a.default.HttpHelp.request({method:"DELETE",url:"/NlInStockHeader/"+t})},findOne:function(t){return a.default.HttpHelp.request({method:"GET",url:"/NlInStockHeader/"+t})},approved:function(t){return a.default.HttpHelp.request({method:"PUT",url:"/NlInStockHeader/"+t+"/approved"})}};e.default=r},2718:function(t,e,n){var i=n(2719);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(2279)("f4efe420",i,!0,{})},2719:function(t,e,n){(t.exports=n(2278)(!0)).push([t.i,".stocks-index{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%}.stocks-index .list-form-inline{height:100%;line-height:50px;width:calc(100% - 130px)}.stocks-index .list-form-inline .el-form-item{margin-right:2px!important;margin-bottom:0}.stocks-index .list-form-inline .el-form-item__label{color:#fff;width:100px;text-align:left;margin-left:5px}.stocks-index .list-form-inline .el-form-item__content{width:180px!important}.stocks-index .dialog{overflow:hidden}.stocks-index .dialog .el-dialog__body{font-size:0;padding:30px 20px 30px 66px}.stocks-index .dialog .item{line-height:30px;display:inline-block}.stocks-index .dialog .item span.required{color:#e26829;display:inline-block}.stocks-index .dialog .item .land,.stocks-index .dialog .item .title{display:inline-block;width:120px}.stocks-index .dialog .item .land{width:250px}.stocks-index .dialog .item .content{margin:10px;display:inline-block;width:250px}.stocks-index .status_approved{color:#98b42c}.stocks-index .status_create{color:#e26829}.stocks-index .dialog-region .el-dialog__body{padding:30px 67px}.stocks-index .dialog-region .item{margin:20px 0;font-size:0;height:30px}.stocks-index .dialog-region .item .item-box{line-height:30px}.stocks-index .dialog-region .item .label{display:inline-block;width:115px;height:30px;vertical-align:middle}.stocks-index .dialog-region .item .label span{color:#e26829;display:inline-block}.stocks-index .dialog-region .item .input{margin-left:40px;width:260px}.stocks-index .dialog-region .item .input i{color:#ffffff99}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl-view/stocks/in.vue"],names:[],mappings:"AACA,cACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,sBAAuB,AAC/B,WAAY,AACZ,WAAa,CACd,AACD,gCACI,YAAa,AACb,iBAAkB,AAClB,wBAA0B,CAC7B,AACD,8CACM,2BAA6B,AAC7B,eAAiB,CACtB,AACD,qDACM,WAAY,AACZ,YAAa,AACb,gBAAiB,AACjB,eAAiB,CACtB,AACD,uDACM,qBAAwB,CAC7B,AACD,sBACI,eAAiB,CACpB,AACD,uCACM,YAAa,AACb,2BAA6B,CAClC,AACD,4BACM,iBAAkB,AAClB,oBAAsB,CAC3B,AACD,0CACQ,cAAe,AACf,oBAAsB,CAC7B,AACD,qEAEQ,qBAAsB,AACtB,WAAa,CACpB,AACD,kCACQ,WAAa,CACpB,AACD,qCACQ,YAAa,AACb,qBAAsB,AACtB,WAAa,CACpB,AACD,+BACI,aAAe,CAClB,AACD,6BACI,aAAe,CAClB,AACD,8CACI,iBAAmB,CACtB,AACD,mCACI,cAAe,AACf,YAAa,AACb,WAAa,CAChB,AACD,6CACM,gBAAkB,CACvB,AACD,0CACM,qBAAsB,AACtB,YAAa,AACb,YAAa,AACb,qBAAuB,CAC5B,AACD,+CACQ,cAAe,AACf,oBAAsB,CAC7B,AACD,0CACM,iBAAkB,AAClB,WAAa,CAClB,AACD,4CACQ,eAAiB,CACxB",file:"in.vue",sourcesContent:["\n.stocks-index {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n.stocks-index .list-form-inline {\n    height: 100%;\n    line-height: 50px;\n    width: calc(100% - 130px);\n}\n.stocks-index .list-form-inline .el-form-item {\n      margin-right: 2px !important;\n      margin-bottom: 0;\n}\n.stocks-index .list-form-inline .el-form-item__label {\n      color: #fff;\n      width: 100px;\n      text-align: left;\n      margin-left: 5px;\n}\n.stocks-index .list-form-inline .el-form-item__content {\n      width: 180px !important;\n}\n.stocks-index .dialog {\n    overflow: hidden;\n}\n.stocks-index .dialog .el-dialog__body {\n      font-size: 0;\n      padding: 30px 20px 30px 66px;\n}\n.stocks-index .dialog .item {\n      line-height: 30px;\n      display: inline-block;\n}\n.stocks-index .dialog .item span.required {\n        color: #e26829;\n        display: inline-block;\n}\n.stocks-index .dialog .item .title,\n      .stocks-index .dialog .item .land {\n        display: inline-block;\n        width: 120px;\n}\n.stocks-index .dialog .item .land {\n        width: 250px;\n}\n.stocks-index .dialog .item .content {\n        margin: 10px;\n        display: inline-block;\n        width: 250px;\n}\n.stocks-index .status_approved {\n    color: #98b42c;\n}\n.stocks-index .status_create {\n    color: #e26829;\n}\n.stocks-index .dialog-region .el-dialog__body {\n    padding: 30px 67px;\n}\n.stocks-index .dialog-region .item {\n    margin: 20px 0;\n    font-size: 0;\n    height: 30px;\n}\n.stocks-index .dialog-region .item .item-box {\n      line-height: 30px;\n}\n.stocks-index .dialog-region .item .label {\n      display: inline-block;\n      width: 115px;\n      height: 30px;\n      vertical-align: middle;\n}\n.stocks-index .dialog-region .item .label span {\n        color: #e26829;\n        display: inline-block;\n}\n.stocks-index .dialog-region .item .input {\n      margin-left: 40px;\n      width: 260px;\n}\n.stocks-index .dialog-region .item .input i {\n        color: #ffffff99;\n}\n"],sourceRoot:""}])},2720:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(194)),o=c(n(195)),a=c(n(2421)),r=c(n(2422)),l=c(n(4)),s=c(n(3)),d=c(n(767));function c(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{headData:["Order No.","Source From","Invoice No.","Tracking No.","Date","Create Date","User","Status","Operation"],tableList:[],printData:{},formSearch:{},currentPage:1,total:0,loading:!1,payTypeArr:s.default.StatusData.STOCKS_PAY_TYPE}},created:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.getData();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{goSearch:function(){this.getData()},onClean:function(){this.formSearch.order_no="",this.formSearch.source_from="",this.formSearch.invoice_no="",this.formSearch.tracking_no="",this.formSearch.startDate="",this.formSearch.endDate="",this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},getData:function(){var t=this;this.loading=!0;var e={order_no:this.formSearch.order_no,source_from:this.formSearch.source_from,invoice_no:this.formSearch.invoice_no,tracking_no:this.formSearch.tracking_no,date:{}};if(this.formSearch.startDate){var n=(0,l.default)(this.formSearch.startDate).startOf("day").valueOf();e.date.start=s.default.Util.parseDate(n)}if(this.formSearch.endDate){var i=(0,l.default)(this.formSearch.endDate).endOf("day").valueOf();e.date.end=s.default.Util.parseDate(i)}r.default.filter(e,this.currentPage).then(function(e){t.tableList=e.data.content.map(function(t){return t.selected=!1,t}),t.total=e.data.totalElements,t.loading=!1})},onPrint:function(){var t=(0,o.default)(i.default.mark(function t(e){var n,o=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],this.loading=!0,t.next=4,a.default.filterAll(e.id).then(function(t){n=t.data.map(function(t){return t.id}),o.loading=!1});case 4:a.default.print(n,{headerId:e.id}).then(function(t){var e="stock in-"+(0,l.default)().format("YYYY-MM-DD"),n=new Blob([t.data],{type:"text/html;charset=utf-8"});(0,d.default)(n,e+".html")});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onAdd:function(){this.$router.push({name:"StockInDetail",params:{id:0}})},onExport:function(){var t={orderNo:this.formSearch.order_no||"",sourceFrom:this.formSearch.source_from||"",invoice_no:this.formSearch.invoice_no||""};if(this.formSearch.startDate){var e=(0,l.default)(this.formSearch.startDate).startOf("day").valueOf();t.startDate=s.default.Util.parseDate(e)}if(this.formSearch.endDate){var n=(0,l.default)(this.formSearch.endDate).endOf("day").valueOf();t.endDate=s.default.Util.parseDate(n)}a.default.exportfile(t).then(function(t){var e="stock in-"+(0,l.default)().format("YYYY-MM-DD");(0,d.default)(t.data,e+".xlsx")})},onEdit:function(t){this.$router.push({name:"StockInDetail",params:{id:t.id}})},onDelete:function(t){var e=this;this.$confirm("Are you sure you wish to delete this?","Delete",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){e.loading=!0,r.default.remove(t.id).then(function(t){e.$message({type:"success",message:"Delete Success!"}),e.getData(),e.loading=!1})}).catch(function(){})},onReview:function(t,e){var n=this;switch(t){case"approved":this.$confirm("Do you agree to operate?","Review",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){n.approvedStockIn(e.id)})}},approvedStockIn:function(t){var e=this;this.loading=!0,r.default.approved(t).then(function(t){e.$message({type:"success",message:"Review Success!"}),e.getData(),e.loading=!1}).catch(function(t){e.$message({message:t.body.error,type:"error"}),e.loading=!1})}}}},2721:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stocks-index"},[n("div",{staticClass:"search-header"},[n("el-form",{staticClass:"list-form-inline",attrs:{inline:!0,model:t.formSearch}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"Order No."},model:{value:t.formSearch.order_no,callback:function(e){t.$set(t.formSearch,"order_no","string"==typeof e?e.trim():e)},expression:"formSearch.order_no"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{placeholder:"Source From"},model:{value:t.formSearch.source_from,callback:function(e){t.$set(t.formSearch,"source_from","string"==typeof e?e.trim():e)},expression:"formSearch.source_from"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{placeholder:"Invoice No."},model:{value:t.formSearch.invoice_no,callback:function(e){t.$set(t.formSearch,"invoice_no","string"==typeof e?e.trim():e)},expression:"formSearch.invoice_no"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{placeholder:"Tracking No."},model:{value:t.formSearch.tracking_no,callback:function(e){t.$set(t.formSearch,"tracking_no","string"==typeof e?e.trim():e)},expression:"formSearch.tracking_no"}})],1),t._v(" "),n("el-form-item",[n("el-date-picker",{attrs:{type:"date",placeholder:"Start Date"},model:{value:t.formSearch.startDate,callback:function(e){t.$set(t.formSearch,"startDate",e)},expression:"formSearch.startDate"}})],1),t._v(" "),n("el-form-item",[n("el-date-picker",{attrs:{type:"date",placeholder:"End Date"},model:{value:t.formSearch.endDate,callback:function(e){t.$set(t.formSearch,"endDate",e)},expression:"formSearch.endDate"}})],1),t._v(" "),n("div",{staticClass:"btn-group-inline-icon"},[n("div",{staticClass:"icons"},[n("span",{staticClass:"icon-item search",attrs:{title:"search"},on:{click:t.goSearch}}),t._v(" "),n("div",{staticClass:"icon-item clear",attrs:{title:"clear"},on:{click:t.onClean}})])])],1),t._v(" "),n("div",{staticClass:"btn-group-top"},[n("div",{staticClass:"icons"},[n("button",{staticClass:"el-button el-button--preview",attrs:{type:"button"},on:{click:t.onAdd}},[t._v("\n          Add\n          "),n("i",{staticClass:"el-icon-plus btn-icon"})]),t._v(" "),n("button",{staticClass:"el-button el-button--preview",attrs:{type:"button"},on:{click:t.onExport}},[t._v("Export")])])])],1),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-wrap",attrs:{"element-loading-text":"loading..."}},[n("div",{staticClass:"table-content-holder"},[t.tableList.length<=0&&!t.loading?n("div",{staticClass:"no-data-content"},[t._v("noResult")]):n("table",{staticClass:"table-content",attrs:{bor:"",der:"0",cellspacing:"0",cellpadding:"0"}},[n("thead",t._l(t.headData,function(e,i){return n("td",{key:i},[t._v(t._s(e))])}),0),t._v(" "),n("tbody",t._l(t.tableList,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.order_no))]),t._v(" "),n("td",[t._v(t._s(e.source_from))]),t._v(" "),n("td",[t._v(t._s(e.invoice_no))]),t._v(" "),n("td",[t._v(t._s(e.tracking_no))]),t._v(" "),n("td",[t._v(t._s(t._f("timeFormat")(e.date,"Y-m-d")))]),t._v(" "),n("td",[t._v(t._s(t._f("timeFormat")(e.create_time,"Y-m-d")))]),t._v(" "),n("td",[t._v(t._s(e.create_user_id))]),t._v(" "),n("td",{class:[0==e.status?"status_create":"status_approved"]},[t._v(t._s(0==e.status?"Create":"Approved"))]),t._v(" "),n("td",[n("button",{staticClass:"btn-underline",on:{click:function(n){return n.stopPropagation(),t.onPrint(e)}}},[t._v("Print")]),t._v(" "),n("button",{staticClass:"btn-underline",on:{click:function(n){return n.stopPropagation(),t.onEdit(e)}}},[t._v("Edit")]),t._v(" "),n("button",{staticClass:"btn-underline",attrs:{disabled:1===e.status},on:{click:function(n){return n.stopPropagation(),t.onDelete(e)}}},[t._v("Delete")]),t._v(" "),n("el-dropdown",{attrs:{trigger:"click"},on:{command:function(n){return t.onReview(n,e)}}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                  Review\n                  "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{disabled:1===e.status,icon:"el-icon-plus",command:"approved"}},[t._v("Approved")])],1)],1)],1)])}),0)])]),t._v(" "),n("div",{staticClass:"table-footer"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),t._v(" "),n("p",{staticClass:"total"},[t._v("total: "+t._s(t.total))])],1)])])},staticRenderFns:[]}}});
//# sourceMappingURL=29.3bc1aa763ee0a513473e.js.map