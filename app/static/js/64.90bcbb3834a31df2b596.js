webpackJsonp([64],{2300:function(e,t,i){var r=i(2)(i(2512),i(2513),function(e){i(2510)},null,null);e.exports=r.exports},2510:function(e,t,i){var r=i(2511);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(2279)("617b5594",r,!0,{})},2511:function(e,t,i){(e.exports=i(2278)(!0)).push([e.i,".receipt-order-item-list{width:100%;height:100%}.receipt-order-item-list .table-wrap{width:100%;height:calc(100% - 392px);-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b;overflow-x:hidden}.receipt-order-item-list span.required{color:#e26829;display:inline-block}.receipt-order-item-list .content-set{width:1280px}.receipt-order-item-list .content{border:1px solid #2b2f3b}.receipt-order-item-list .content .parts-list{padding:0 40px;font-size:12px;overflow:hidden;height:50px;line-height:50px;width:100%;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b}.receipt-order-item-list .content .parts-list .att-btn{padding:6px 9px;min-width:0;margin:11px auto;display:block}.receipt-order-item-list .content .parts-list .labelAdd{margin-left:14px}.receipt-order-item-list .content .footer{width:100%;height:60px;line-height:60px;padding-left:40px;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b}.receipt-order-item-list .content .footer .footer-pagination{float:right}.receipt-order-item-list .dialog .el-dialog--large{width:1100px}.receipt-order-item-list .dialog .header .search-content{width:200px;margin-right:10px}.receipt-order-item-list .dialog .header .search-btn{position:absolute;top:15px;left:250px;width:30px;height:30px}.receipt-order-item-list .table-wrap .table-content{padding-bottom:0}.receipt-order-item-list .pagination{padding:10px}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl/receipt-order/receipt-order-item-list.vue"],names:[],mappings:"AACA,yBACE,WAAY,AACZ,WAAa,CACd,AACD,qCACI,WAAY,AACZ,0BAA2B,AAC3B,kCAAmC,AAC3B,0BAA2B,AACnC,iBAAmB,CACtB,AACD,uCACI,cAAe,AACf,oBAAsB,CACzB,AACD,sCACI,YAAc,CACjB,AACD,kCACI,wBAA0B,CAC7B,AACD,8CACM,eAAgB,AAChB,eAAgB,AAChB,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,WAAY,AACZ,kCAAmC,AAC3B,yBAA2B,CACxC,AACD,uDACQ,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,aAAe,CACtB,AACD,wDACQ,gBAAkB,CACzB,AACD,0CACM,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,kCAAmC,AAC3B,yBAA2B,CACxC,AACD,6DACQ,WAAa,CACpB,AACD,mDACI,YAAc,CACjB,AACD,yDACI,YAAa,AACb,iBAAmB,CACtB,AACD,qDACI,kBAAmB,AACnB,SAAU,AACV,WAAY,AACZ,WAAY,AACZ,WAAa,CAChB,AACD,oDACI,gBAAkB,CACrB,AACD,qCACI,YAAc,CACjB",file:"receipt-order-item-list.vue",sourcesContent:["\n.receipt-order-item-list {\n  width: 100%;\n  height: 100%;\n}\n.receipt-order-item-list .table-wrap {\n    width: 100%;\n    height: calc(100% - 392px);\n    -webkit-box-shadow: 0 -1px #2b2f3b;\n            box-shadow: 0 -1px #2b2f3b;\n    overflow-x: hidden;\n}\n.receipt-order-item-list span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.receipt-order-item-list .content-set {\n    width: 1280px;\n}\n.receipt-order-item-list .content {\n    border: 1px solid #2b2f3b;\n}\n.receipt-order-item-list .content .parts-list {\n      padding: 0 40px;\n      font-size: 12px;\n      overflow: hidden;\n      height: 50px;\n      line-height: 50px;\n      width: 100%;\n      -webkit-box-shadow: 0 -1px #2b2f3b;\n              box-shadow: 0 -1px #2b2f3b;\n}\n.receipt-order-item-list .content .parts-list .att-btn {\n        padding: 6px 9px;\n        min-width: 0;\n        margin: 11px auto;\n        display: block;\n}\n.receipt-order-item-list .content .parts-list .labelAdd {\n        margin-left: 14px;\n}\n.receipt-order-item-list .content .footer {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      padding-left: 40px;\n      -webkit-box-shadow: 0 -1px #2b2f3b;\n              box-shadow: 0 -1px #2b2f3b;\n}\n.receipt-order-item-list .content .footer .footer-pagination {\n        float: right;\n}\n.receipt-order-item-list .dialog .el-dialog--large {\n    width: 1100px;\n}\n.receipt-order-item-list .dialog .header .search-content {\n    width: 200px;\n    margin-right: 10px;\n}\n.receipt-order-item-list .dialog .header .search-btn {\n    position: absolute;\n    top: 15px;\n    left: 250px;\n    width: 30px;\n    height: 30px;\n}\n.receipt-order-item-list .table-wrap .table-content {\n    padding-bottom: 0;\n}\n.receipt-order-item-list .pagination {\n    padding: 10px;\n}\n"],sourceRoot:""}])},2512:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(i(3)),n=c(i(90)),a=c(i(7)),o=c(i(5)),s=c(i(9)),l=c(i(10)),d=c(i(8));function c(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{loading:!1,warehouseList:[],departmentList:[],areaCodeList:[],tableHead:["Item Name","BF Art Nr","Specification","Quantity","Operation"],itemHeadData:["Image","Name","Part No.","Firmware"],queryItemList:[],orderItems:[],selectItems:[],orderId:0,queryItemCondition:"",allChecked:!1,currentPage:1,total:0,dialogCreateVisible:!1,dialogSelectCategoryVisible:!1,categoryList:[],defaultProps:{id:"id",children:"child",label:"name"},selectCategoryItem:{id:"",name:""},isActive:!1,deleteStatus:!1}},i18n:{messages:{fr:d.default.Component.Order.Save,en:o.default.Component.Order.Save,zh:a.default.Component.Order.Save,de:s.default.Component.Order.Save,nl:l.default.Component.Order.Save}},computed:{allSelectedForAdd:{get:function(){return this.selectItems.reduce(function(e,t){return e&&t.selected},!0)},set:function(e){this.selectItems.forEach(function(t){t.selected=e})}},allSelectedForDelete:{get:function(){return this.orderItems.reduce(function(e,t){return e&&t.selected},!0)},set:function(e){this.orderItems.forEach(function(t){t.selected=e})}}},mounted:function(){var e=this,t=this;t.areaCodeList=n.default.init(),t.orderId=this.$route.query.orderId,t.orderId&&(this.loading=!0,this.getReceiptStatus(t.orderId).then(function(e){if(-2===e.code)throw e.message;"Created"===e.status_name?(t.isActive=!0,t.deleteStatus=!1):(t.isActive=!1,t.deleteStatus=!0),t.loading=!1}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1}),t.loading=!0,this.filterReceiptDetail({receipt_order_id:t.orderId}).then(function(e){if(-2===e.code)throw e.message;t.orderItems=e.content.map(function(e){return e.selected=!1,e.item_part_no=e.item_code,e}),t.loading=!1}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1})),t.loading=!0,this.getAllDepartment().then(function(i){e.departmentList=i,t.loading=!1}),t.loading=!0,this.getAllWarehouse().then(function(i){e.warehouseList=i,t.loading=!1}),this.getAllCategory()},methods:{getReceiptStatus:function(e){return r.default.Api.request({method:"get",url:"/nl/order/receipt/"+e+"/status"})},getAllCategory:function(){var e=this;this.loading=!0,r.default.Api.Category.getAllCategoryListOfBafang(r.default.Const.COMPONENT_ROOT_CATEGORY).then(function(t){e.categoryList=t.category_list,e.loading=!1},function(t){e.loading=!1})},goOrderList:function(){this.$router.push({path:"list"})},deleteItem:function(e,t){var i=this;e.id?(i.loading=!0,i.deleteReceiptDetail(e.id).then(function(e){i.$message({message:"Delete Successfully",type:"success"}),i.loading=!1,i.orderItems.splice(t,1)},function(e){i.loading=!1})):i.orderItems.splice(t,1)},addItems:function(){var e=this;this.selectItems.forEach(function(t,i){if(!0===t.selected){var r=!1;if(e.orderItems.forEach(function(e){e.item_id===t.id&&(r=!0)}),!r){var n=e.selectItems[i];e.orderItems.push({item_id:n.id,category_root_id:n.category_root_id,category_id:n.category_id,item_name:n.name,item_part_no:n.ext_part_no,receipt_quantity:1,selected:!1})}}}),this.closeChooseItem()},closeChooseItem:function(){this.selectItems=[],this.queryItemList=[],this.queryItemCondition="",this.dialogCreateVisible=!1},createAdvice:function(){this.$router.push({name:"receiptPutAwayAdvice",query:{orderId:this.orderId}})},createOrder:function(){var e=this,t=this;if(this.checkParams()){var i=this.orderItems.map(function(t){return t.item_code=t.item_part_no,t.receipt_order_id=e.orderId-0,t});this.loading=!0,this.postReceiptDetail(i).then(function(e){if(-2===e.code)throw e.message;return t.$message({message:"Save Successfully",type:"success"}),t.filterReceiptDetail({receipt_order_id:t.orderId})}).then(function(e){if(-2===e.code)throw e.message;t.orderItems=e.content.map(function(e){return e.selected=!1,e.item_part_no=e.item_code,e}),t.loading=!1}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1})}},checkParams:function(){return!!this.orderItems.length||(this.$message({message:"Please add item",type:"warning"}),!1)},queryOrderItem:function(){var e=this,t=r.default.Data.getOrg(),i=this.queryItemCondition.trim();null!==t&&r.default.Api.Item.queryOrderItem(25,this.selectCategoryItem.id,"",i,this.currentPage).then(function(t){e.queryItemList=t.query,e.total=t.count,!e.queryItemList.length>0?e.$message({message:"There are no matching data",type:"warning"}):(e.selectItems=[],e.queryItemList.forEach(function(t,i){var r={selected:!0,key:i,name:t.name,img:t.img,ext_part_no:t.ext_part_no,id:t.id,category_root_id:t.category_root_id,category_id:t.category_id};e.selectItems.push(r)}))})},clearCondition:function(){this.selectItems=[],this.queryItemList=[],this.queryItemCondition="",this.selectCategoryItem="",this.total=0,this.currentPage=1},deleteOrderItem:function(){var e=this,t=[];this.orderItems.forEach(function(e,i){!0===e.selected&&t.unshift({item:e,index:i})}),t.forEach(function(t){t.item.id?(e.loading=!0,e.deleteReceiptDetail(t.item.id).then(function(t){e.$message({message:"Delete Successfully",type:"success"}),e.loading=!1},function(t){e.loading=!1}),e.orderItems.splice(t.index,1)):e.orderItems.splice(t.index,1)})},selectCategory:function(){this.dialogSelectCategoryVisible=!0},handleNodeClick:function(e){e.hasOwnProperty("child")&&(e.child.length<=0&&(this.selectCategoryItem=e,this.dialogSelectCategoryVisible=!1))},handleCurrentPageChange:function(e){this.currentPage=e,this.queryOrderItem()},getAllDepartment:function(){return r.default.Api.request({method:"GET",url:"/nl/public/department/all"})},getAllWarehouse:function(){return r.default.Api.request({method:"GET",url:"/nl/warehouse/all"})},postReceiptDetail:function(e){return r.default.Api.request({method:"post",url:"/nl/order/receipt/detail/bulk",data:e})},filterReceiptDetail:function(e){return r.default.Api.request({method:"post",url:"/nl/order/receipt/detail/find-receipt-detail-by-order-no",data:e,params:{page:1,size:999}})},deleteReceiptDetail:function(e){return r.default.Api.request({method:"delete",url:"/nl/order/receipt/detail/"+e})}}}},2513:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"receipt-order-item-list"},[i("div",{staticClass:"header"},[i("div",{staticClass:"btn-group-inline"},[i("div",{staticClass:"icons"},[i("div",{staticClass:"icon-item back",attrs:{title:"back"},on:{click:function(t){return e.$router.back()}}})])]),e._v(" "),i("label",{staticClass:"title"},[e._v(e._s(e.orderId?"Edit Package List":"Add Package List"))])]),e._v(" "),i("div",{staticClass:"content-wrap"},[i("div",{staticClass:"content content-set"},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-wrap"},[i("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[i("thead",[e.isActive?i("td",[i("el-checkbox",{model:{value:e.allSelectedForDelete,callback:function(t){e.allSelectedForDelete=t},expression:"allSelectedForDelete"}})],1):e._e(),e._v(" "),e._l(e.tableHead,function(t){return i("td",[e._v(e._s(t))])})],2),e._v(" "),i("tbody",e._l(e.orderItems,function(t,r){return i("tr",[e.isActive?i("td",[i("el-checkbox",{staticClass:"table-checkbox",model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"item.selected"}})],1):e._e(),e._v(" "),i("td",[e._v(e._s(e._f("categoryRoot")(t.category_root_id)))]),e._v(" "),i("td",[e._v(e._s(t.item_part_no))]),e._v(" "),i("td",[e._v(e._s(t.name||t.item_name))]),e._v(" "),e.isActive?i("td",[i("el-input-number",{staticClass:"input-number",attrs:{min:1},model:{value:t.receipt_quantity,callback:function(i){e.$set(t,"receipt_quantity",i)},expression:"item.receipt_quantity"}})],1):i("td",[e._v(e._s(t.receipt_quantity))]),e._v(" "),i("td",[i("button",{staticClass:"btn-underline",attrs:{disabled:e.deleteStatus},on:{click:function(i){return i.stopPropagation(),e.deleteItem(t,r)}}},[e._v("\n                  "+e._s(e.$t("delete"))+"\n                ")])])])}),0)])]),e._v(" "),e.isActive?i("div",{staticClass:"parts-list"},[i("el-button",{staticClass:"att-btn",attrs:{type:"primary"},on:{click:function(t){e.dialogCreateVisible=!0}}},[e._v("+")])],1):e._e(),e._v(" "),i("div",{staticClass:"footer"},[e.isActive?i("el-button",{attrs:{type:"delete"},on:{click:e.deleteOrderItem}},[e._v(e._s(e.$t("delete")))]):e._e(),e._v(" "),e.isActive?i("el-button",{attrs:{type:"primary"},on:{click:e.createOrder}},[e._v(e._s(e.$t("saveOrder")))]):e._e(),e._v(" "),e.orderItems.length>0&&!e.isActive?i("el-button",{attrs:{type:"primary"},on:{click:e.createAdvice}},[e._v("Advice")]):e._e()],1),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:e.$t("addItem"),visible:e.dialogCreateVisible,size:"large",top:"10%"},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("el-input",{staticClass:"search-content",attrs:{placeholder:e.$t("category"),disabled:!0},nativeOn:{click:function(t){return e.selectCategory.apply(null,arguments)}},model:{value:e.selectCategoryItem.name,callback:function(t){e.$set(e.selectCategoryItem,"name",t)},expression:"selectCategoryItem.name"}}),e._v(" "),i("el-input",{staticClass:"search-content",attrs:{placeholder:e.$t("modelNamePN")},model:{value:e.queryItemCondition,callback:function(t){e.queryItemCondition=t},expression:"queryItemCondition"}}),e._v(" "),i("div",{staticClass:"btn-group-inline"},[i("div",{staticClass:"icons"},[i("div",{staticClass:"icon-item search",attrs:{title:e.$t("search")},on:{click:e.queryOrderItem}}),e._v(" "),i("div",{staticClass:"icon-item clear",attrs:{title:e.$t("clear")},on:{click:e.clearCondition}})])])],1),e._v(" "),i("div",{staticClass:"table-wrap"},[i("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[i("thead",[i("td",[i("el-checkbox",{model:{value:e.allSelectedForAdd,callback:function(t){e.allSelectedForAdd=t},expression:"allSelectedForAdd"}})],1),e._v(" "),e._l(e.itemHeadData,function(t){return i("td",[e._v(e._s(t))])})],2),e._v(" "),i("tbody",e._l(e.selectItems,function(t,r){return i("tr",[i("td",[i("el-checkbox",{staticClass:"table-checkbox",model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"item.selected"}})],1),e._v(" "),i("td",[i("img",{attrs:{src:e._f("getImgUrl")(t.img)}})]),e._v(" "),i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[e._v(e._s(t.ext_part_no))]),e._v(" "),i("td",[e._v(e._s(r+1)+".bin")])])}),0)]),e._v(" "),i("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":10,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentPageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addItems}},[e._v(e._s(e.$t("addItems")))])],1)])])],1)]),e._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:e.$t("selectCategory"),visible:e.dialogSelectCategoryVisible,size:"large"},on:{"update:visible":function(t){e.dialogSelectCategoryVisible=t}}},[i("div",{staticClass:"content",staticStyle:{"max-height":"500px",overflow:"auto"}},[i("div",{staticClass:"category-tree"},[i("el-tree",{attrs:{data:e.categoryList,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)])])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=64.90bcbb3834a31df2b596.js.map