webpackJsonp([17],{2348:function(e,t,a){var i=a(2)(a(2715),a(2717),function(e){a(2713)},null,null);e.exports=i.exports},2364:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r,n=c(a(194)),o=c(a(195)),l=(i=(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.default.Api.Category.getAllCategoryListOfBafang(d.default.Const.COMPONENT_ROOT_CATEGORY));case 1:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),s=(r=(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.default.HttpHelp.request({method:"GET",url:"/nl/nlPublic/company/all"}));case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),d=c(a(3));function c(e){return e&&e.__esModule?e:{default:e}}var u={getAllCategory:l,getAllCustomer:s};t.default=u},2365:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=s(a(194)),n=s(a(195)),o=(i=(0,n.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.default.HttpHelp.request({method:"GET",url:"/NlWarehouseArea/all"}));case 1:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),l=s(a(3));function s(e){return e&&e.__esModule?e:{default:e}}var d={findAll:o,addOneArea:function(e){return l.default.HttpHelp.request({method:"POST",url:"/NlWarehouseArea",data:e})},deleteOneArea:function(e){return l.default.HttpHelp.request({method:"DELETE",url:"/NlWarehouseArea/"+e})},areaFilter:function(e,t,a){return l.default.HttpHelp.request({method:"POST",url:"/NlWarehouseArea/filter",data:e,params:{page:t||0,size:a||10}})}};t.default=d},2369:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=s(a(194)),n=s(a(195)),o=(i=(0,n.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.default.HttpHelp.request({method:"GET",url:"/NlProduct/findNlProductByOrgId"}));case 1:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),l=s(a(3));function s(e){return e&&e.__esModule?e:{default:e}}var d={filter:function(e,t,a){return l.default.HttpHelp.request({method:"POST",url:"/NlProduct/filter2",data:e,params:{page:t||0,size:a||10}})},find:function(e,t){return l.default.HttpHelp.request({method:"GET",url:"/NlProduct",data:{page:e||0,size:t||10}})},findAll:o,save:function(e){return l.default.HttpHelp.request({method:"POST",url:"/NlProduct/save2",data:e})},remove:function(e){return l.default.HttpHelp.request({method:"DELETE",url:"/NlProduct/"+e})},importfile:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.default.HttpHelp.request({method:"POST",url:"/NlProduct/importProduct",data:e,params:{override:t}})},exportTemplate:function(){return l.default.HttpHelp.request({method:"GET",url:"/NlProduct/exportTemplate",responseType:"blob"})}};t.default=d},2713:function(e,t,a){var i=a(2714);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(2279)("c6fd76da",i,!0,{})},2714:function(e,t,a){(e.exports=a(2278)(!0)).push([e.i,".threshold-box{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%}.threshold-box .search-header{z-index:1;padding:0;height:60px}.threshold-box .search-header .searchWrap{background:#383d49;height:100%}.threshold-box .search-header .searchWrap .btn-group-top{top:17px;display:-webkit-box;display:-ms-flexbox;display:flex;height:auto}.threshold-box .search-header .searchWrap .btn-group-top .icons{margin:5px}.threshold-box .search-header .searchWrap .btn-icon{font-size:12px;margin-left:8px}.threshold-box .search-header .searchWrap .el-input{float:left;width:200px;padding-left:15px;line-height:60px}.threshold-box .search-header .searchWrap .el-form-item{padding:0;margin:0;line-height:60px}.threshold-box .search-header .searchWrap .btn-group-inline{padding-top:9px}.threshold-box .search-header .searchWrap .el-form-item__content{width:100%!important}.dialog-region .el-dialog__body{padding:30px 67px}.dialog-region .item{margin:20px 0;font-size:0;height:30px}.dialog-region .item .item-box{line-height:30px}.dialog-region .item .label{display:inline-block;width:120px;height:30px;vertical-align:middle}.dialog-region .item .label span{color:#e26829;display:inline-block}.dialog-region .item .input{margin-left:40px;width:260px}.dialog-region .item .input i{color:#ffffff99}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl-view/warehouse/threshold.vue"],names:[],mappings:"AACA,eACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,sBAAuB,AAC/B,WAAY,AACZ,WAAa,CACd,AACD,8BACI,UAAW,AACX,UAAW,AACX,WAAa,CAChB,AACD,0CACM,mBAAoB,AACpB,WAAa,CAClB,AACD,yDACQ,SAAU,AACV,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,WAAa,CACpB,AACD,gEACU,UAAY,CACrB,AACD,oDACQ,eAAgB,AAChB,eAAiB,CACxB,AACD,oDACQ,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,gBAAkB,CACzB,AACD,wDACQ,UAAW,AACX,SAAU,AACV,gBAAkB,CACzB,AACD,4DACQ,eAAiB,CACxB,AACD,iEACQ,oBAAuB,CAC9B,AACD,gCACE,iBAAmB,CACpB,AACD,qBACE,cAAe,AACf,YAAa,AACb,WAAa,CACd,AACD,+BACI,gBAAkB,CACrB,AACD,4BACI,qBAAsB,AACtB,YAAa,AACb,YAAa,AACb,qBAAuB,CAC1B,AACD,iCACM,cAAe,AACf,oBAAsB,CAC3B,AACD,4BACI,iBAAkB,AAClB,WAAa,CAChB,AACD,8BACM,eAAiB,CACtB",file:"threshold.vue",sourcesContent:["\n.threshold-box {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n.threshold-box .search-header {\n    z-index: 1;\n    padding: 0;\n    height: 60px;\n}\n.threshold-box .search-header .searchWrap {\n      background: #383d49;\n      height: 100%;\n}\n.threshold-box .search-header .searchWrap .btn-group-top {\n        top: 17px;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        height: auto;\n}\n.threshold-box .search-header .searchWrap .btn-group-top .icons {\n          margin: 5px;\n}\n.threshold-box .search-header .searchWrap .btn-icon {\n        font-size: 12px;\n        margin-left: 8px;\n}\n.threshold-box .search-header .searchWrap .el-input {\n        float: left;\n        width: 200px;\n        padding-left: 15px;\n        line-height: 60px;\n}\n.threshold-box .search-header .searchWrap .el-form-item {\n        padding: 0;\n        margin: 0;\n        line-height: 60px;\n}\n.threshold-box .search-header .searchWrap .btn-group-inline {\n        padding-top: 9px;\n}\n.threshold-box .search-header .searchWrap .el-form-item__content {\n        width: 100% !important;\n}\n.dialog-region .el-dialog__body {\n  padding: 30px 67px;\n}\n.dialog-region .item {\n  margin: 20px 0;\n  font-size: 0;\n  height: 30px;\n}\n.dialog-region .item .item-box {\n    line-height: 30px;\n}\n.dialog-region .item .label {\n    display: inline-block;\n    width: 120px;\n    height: 30px;\n    vertical-align: middle;\n}\n.dialog-region .item .label span {\n      color: #e26829;\n      display: inline-block;\n}\n.dialog-region .item .input {\n    margin-left: 40px;\n    width: 260px;\n}\n.dialog-region .item .input i {\n      color: #ffffff99;\n}\n"],sourceRoot:""}])},2715:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l(a(3));var i=l(a(2364)),r=l(a(2365)),n=l(a(2369)),o=l(a(2716));function l(e){return e&&e.__esModule?e:{default:e}}t.default={props:["id"],computed:{getProducts:function(){var e=this;if(this.materialData&&this.materialData.category_id)return this.productList.filter(function(t){return t.category_id===e.materialData.category_id})},filterProducts:function(){var e=this;if(this.formSearch&&this.formSearch.category_id)return this.productList.filter(function(t){return t.category_id===e.formSearch.category_id})}},data:function(){return{warehouseObj:{},formSearch:{},headData:["Warehouse Name","Category","Product Name","Product Code","Quantity","Create Date","User","Operation"],loading:!1,materialData:{},dialogTitle:"",dialogAddVisible:!1,areaList:[],categoryList:[],productList:[],tableList:[]}},created:function(){var e=this;this.loading=!0,this.warehouseObj=this.$route.params,i.default.getAllCategory().then(function(t){e.categoryList=t.category_list.map(function(e,t){return{id:e.id,name:e.name,isActive:0==t}}),e.loading=!1}),this.loading=!0,r.default.findAll().then(function(t){e.areaList=t.data,e.loading=!1}),this.loading=!0,n.default.findAll().then(function(t){e.productList=t.data,e.loading=!1}),this.warehouseObj&&this.getData()},methods:{goSearch:function(){this.getData()},onClean:function(){this.formSearch.category_id="",this.formSearch.product_code="",this.getData()},goAfterIndex:function(){this.$router.back()},selectHandle:function(e){var t=this.productList.find(function(t){return t.product_code===e});t&&(this.materialData.product_name=t.name,this.materialData.product_id=t.id)},selectCategory:function(e){var t=this.categoryList.find(function(t){return t.id===e});t&&(this.materialData.category_name=t.name)},onAdd:function(){this.materialData={id:0,warehouse_id:this.warehouseObj.id-0,warehouse_name:this.warehouseObj.warehouse_name,product_name:"",product_code:"",threshold_qty:"",category_name:"",product_id:0},this.dialogTitle="Add",this.dialogAddVisible=!0},onEdit:function(e){this.materialData=e,this.dialogTitle="Edit",this.dialogAddVisible=!0},onDelete:function(e){var t=this;this.$confirm("Are you sure you wish to delete this?","Delete",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){o.default.remove(e.id).then(function(e){t.$message({type:"success",message:"Delete Success!"}),t.getData(),t.loading=!1})})},dialogConfirm:function(){var e=this;this.required()&&(this.loading=!0,o.default.save(this.materialData).then(function(t){if(-2===t.data.code||400===t.data.code)throw t.data.message;e.$message({message:"Successfully",type:"success"}),e.getData(),e.dialogAddVisible=!1,e.loading=!1}).catch(function(t){e.$message({message:t,type:"error"}),e.dialogAddVisible=!1,e.loading=!1}))},dialogCancel:function(){this.dialogAddVisible=!1},getData:function(){var e=this;this.loading=!0,o.default.filterAll({category_id:this.formSearch.category_id,warehouse_id:+this.warehouseObj.id,product_code:this.formSearch.product_code}).then(function(t){e.tableList=t.data,e.loading=!1})},required:function(){return""===this.materialData.warehouse_id?(this.$message({message:"Please input Warehouse Code !",type:"warning"}),!1):""===this.materialData.product_code?(this.$message({message:"Please input Product Code !",type:"warning"}),!1):""!==this.materialData.threshold_qty||(this.$message({message:"Please input Threshold Quantity !",type:"warning"}),!1)}}}},2716:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=a(3),n=(i=r)&&i.__esModule?i:{default:i};var o={filter:function(e,t,a){return n.default.HttpHelp.request({method:"POST",url:"/nlIntermediate/filter",data:e,params:{page:t||0,size:a||10}})},find:function(e,t){return n.default.HttpHelp.request({method:"GET",url:"/nlIntermediate",data:{page:e||0,size:t||10}})},findAll:function(){return n.default.HttpHelp.request({method:"GET",url:"/nlIntermediate/all"})},save:function(e){return n.default.HttpHelp.request({method:"POST",url:"/nlIntermediate",data:e})},remove:function(e){return n.default.HttpHelp.request({method:"DELETE",url:"/nlIntermediate/"+e})},filterAll:function(e){return n.default.HttpHelp.request({method:"POST",url:"/nlIntermediate/filterAll",data:e})}};t.default=o},2717:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"threshold-box"},[a("div",{staticClass:"search-header"},[a("div",{staticClass:"searchWrap"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"Category",filterable:""},model:{value:e.formSearch.category_id,callback:function(t){e.$set(e.formSearch,"category_id",t)},expression:"formSearch.category_id"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{placeholder:"Product",filterable:""},model:{value:e.formSearch.product_code,callback:function(t){e.$set(e.formSearch,"product_code",t)},expression:"formSearch.product_code"}},e._l(e.filterProducts,function(e){return a("el-option",{key:e.id,attrs:{label:"【"+e.product_code+"】- "+e.name,value:e.product_code}})}),1),e._v(" "),a("div",{staticClass:"btn-group-inline"},[a("div",{staticClass:"icons"},[a("span",{staticClass:"icon-item search",attrs:{title:"search"},on:{click:e.goSearch}}),e._v(" "),a("div",{staticClass:"icon-item clear",attrs:{title:"clear"},on:{click:e.onClean}}),e._v(" "),a("div",{staticClass:"icon-item back",attrs:{title:"back"},on:{click:e.goAfterIndex}})])])],1)],1),e._v(" "),a("div",{staticClass:"btn-group-top"},[a("div",{staticClass:"icons"},[a("div",{staticClass:"icon-item add-v2",attrs:{title:"add"},on:{click:e.onAdd}})])])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-wrap",attrs:{"element-loading-text":"loading..."}},[a("div",{staticClass:"table-content-holder"},[a("table",{staticClass:"table-content",attrs:{bor:"",der:"0",cellspacing:"0",cellpadding:"0"}},[a("thead",e._l(e.headData,function(t,i){return a("td",{key:i},[e._v(e._s(t))])}),0),e._v(" "),a("tbody",e._l(e.tableList,function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.warehouse_name))]),e._v(" "),a("td",[e._v(e._s(t.category_name))]),e._v(" "),a("td",[e._v(e._s(t.product_name))]),e._v(" "),a("td",[e._v(e._s(t.product_code))]),e._v(" "),a("td",[e._v(e._s(t.threshold_qty))]),e._v(" "),a("td",[e._v(e._s(e._f("timeFormat")(t.create_time,"Y-m-d")))]),e._v(" "),a("td",[e._v(e._s(t.create_user_id))]),e._v(" "),a("td",[a("button",{staticClass:"btn-underline",on:{click:function(a){return a.stopPropagation(),e.onEdit(t)}}},[e._v("Edit")]),e._v(" "),a("button",{staticClass:"btn-underline",on:{click:function(a){return a.stopPropagation(),e.onDelete(t)}}},[e._v("Delete")])])])}),0)])])]),e._v(" "),a("el-dialog",{staticClass:"dialog-region",attrs:{title:e.dialogTitle,visible:e.dialogAddVisible},on:{"update:title":function(t){e.dialogTitle=t},"update:visible":function(t){e.dialogAddVisible=t}}},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-box"},[a("label",{staticClass:"label"},[e._v("\n          Warehouse\n          "),a("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),a("el-input",{staticClass:"input",attrs:{disabled:!0},model:{value:e.materialData.warehouse_name,callback:function(t){e.$set(e.materialData,"warehouse_name",t)},expression:"materialData.warehouse_name"}})],1)]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-box"},[a("label",{staticClass:"label"},[e._v("\n          Category\n          "),a("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),a("el-select",{staticClass:"input",attrs:{slot:"prepend",filterable:""},on:{change:e.selectCategory},slot:"prepend",model:{value:e.materialData.category_id,callback:function(t){e.$set(e.materialData,"category_id",t)},expression:"materialData.category_id"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-box"},[a("label",{staticClass:"label"},[e._v("\n          Product Code\n          "),a("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),a("el-select",{staticClass:"input",attrs:{slot:"prepend",filterable:""},on:{change:e.selectHandle},slot:"prepend",model:{value:e.materialData.product_code,callback:function(t){e.$set(e.materialData,"product_code",t)},expression:"materialData.product_code"}},e._l(e.getProducts,function(e){return a("el-option",{key:e.id,attrs:{label:"【"+e.product_code+"】- "+e.name,value:e.product_code}})}),1)],1)]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-box"},[a("label",{staticClass:"label"},[e._v("\n          Product Name\n          "),a("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),a("el-input",{staticClass:"input",attrs:{disabled:!0},model:{value:e.materialData.product_name,callback:function(t){e.$set(e.materialData,"product_name",t)},expression:"materialData.product_name"}})],1)]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-box"},[a("label",{staticClass:"label"},[e._v("\n          Threshold Qty\n          "),a("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),a("el-input",{staticClass:"input",attrs:{type:"number",min:"0"},model:{value:e.materialData.threshold_qty,callback:function(t){e.$set(e.materialData,"threshold_qty",t)},expression:"materialData.threshold_qty"}})],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"preview"},on:{click:e.dialogConfirm}},[e._v("confirm")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogCancel}},[e._v("cancel")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=17.e5e07035d00c7baaeac7.js.map