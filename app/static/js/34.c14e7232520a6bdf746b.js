webpackJsonp([34],{2284:function(e,t,n){var i=n(2)(n(2445),n(2447),function(e){n(2443)},null,null);e.exports=i.exports},2443:function(e,t,n){var i=n(2444);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(2279)("a03e4e60",i,!0,{})},2444:function(e,t,n){(e.exports=n(2278)(!0)).push([e.i,".warehouse-inventory{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%}.warehouse-inventory .inventory-list-container{width:100%;height:100%;padding-left:272px}.warehouse-inventory .file{position:relative}.warehouse-inventory .file .label{display:inline-block;height:26px;line-height:26px;background-color:#e26829;border-radius:26px;padding-left:25px;padding-right:30px}.warehouse-inventory .file span{display:block;width:400px;height:20px;margin:10px 5px;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;white-space:nowrap}.warehouse-inventory .file .file-input{width:300px;position:absolute;left:0;top:0;opacity:0;z-index:2}.warehouse-inventory span.required{color:#e26829;display:inline-block}.warehouse-inventory .category-tree{position:absolute;left:0;top:0;overflow:auto;width:272px;height:100%;background:rgba(39,43,55,.75);border-right:1px solid #383d49}.warehouse-inventory .category-tree .searchWrap{background:#383d49;height:60px}.warehouse-inventory .category-tree .searchWrap .demo-form-inline{padding-top:10px}.warehouse-inventory .category-tree .el-tree{width:270px}.warehouse-inventory .category-tree .tree-node{white-space:nowrap}.warehouse-inventory .category-tree .tree-node .tree-node__content{height:50px;line-height:50px;padding-left:0;cursor:pointer}.warehouse-inventory .category-tree .tree-node .tree-node__content .tree-node__label{padding-left:6px}.warehouse-inventory .category-tree .tree-btn{height:50px;line-height:50px}.warehouse-inventory .category-tree .tree-btn a{font-size:14px;color:#e26829;font-weight:500;text-decoration:underline;margin-left:26px}.warehouse-inventory .category-tree .tree-btn a:hover{cursor:pointer}.warehouse-inventory .category-tree .training-btn a{color:#fff;text-decoration:none}.warehouse-inventory .search-header{padding:0;height:60px}.warehouse-inventory .list-form-inline{height:100%;line-height:50px}.warehouse-inventory .list-form-inline .el-form-item{margin-right:2px!important;margin-bottom:0}.warehouse-inventory .list-form-inline .el-form-item__label{color:#fff;width:80px;margin-left:5px;text-align:left}.warehouse-inventory .list-form-inline .el-form-item__content{width:180px!important}.warehouse-inventory .loading{width:100px;height:100px;position:absolute;top:50%;left:50%;margin-top:-50px;margin-left:-50px}.warehouse-inventory .table-wrap .long-td{max-width:270px;text-overflow:ellipsis;overflow:hidden;text-align:left}.warehouse-inventory .dialog-import{overflow:hidden}.warehouse-inventory .dialog-import .el-dialog__body{font-size:0;padding:30px 20px 30px 66px}.warehouse-inventory .dialog-import .item{line-height:30px;display:inline-block}.warehouse-inventory .dialog-import .item .land{width:250px}.warehouse-inventory .dialog-import .item .title{display:inline-block;width:80px}.warehouse-inventory .dialog-import .item .content{margin:10px;display:inline-block;width:250px}.warehouse-inventory .cascader .el-cascader__label{line-height:inherit}.warehouse-inventory .cascader ::-webkit-scrollbar{width:5px;height:14px}.warehouse-inventory .el-input-number{width:220px}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl/warehouse/warehouse-inventory.vue"],names:[],mappings:"AACA,qBACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,sBAAuB,AAC/B,WAAY,AACZ,WAAa,CACd,AACD,+CACI,WAAY,AACZ,YAAa,AACb,kBAAoB,CACvB,AACD,2BACI,iBAAmB,CACtB,AACD,kCACM,qBAAsB,AACtB,YAAa,AACb,iBAAkB,AAClB,yBAA0B,AAC1B,mBAAoB,AACpB,kBAAmB,AACnB,kBAAoB,CACzB,AACD,gCACM,cAAe,AACf,YAAa,AACb,YAAa,AACb,gBAAiB,AACjB,gBAAiB,AACjB,uBAAwB,AACxB,0BAA2B,AAC3B,kBAAoB,CACzB,AACD,uCACM,YAAa,AACb,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,UAAW,AACX,SAAW,CAChB,AACD,mCACI,cAAe,AACf,oBAAsB,CACzB,AACD,oCACI,kBAAmB,AACnB,OAAQ,AACR,MAAO,AACP,cAAe,AACf,YAAa,AACb,YAAa,AACb,8BAAmC,AACnC,8BAAgC,CACnC,AACD,gDACM,mBAAoB,AACpB,WAAa,CAClB,AACD,kEACQ,gBAAkB,CACzB,AACD,6CACM,WAAa,CAClB,AACD,+CACM,kBAAoB,CACzB,AACD,mEACQ,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,cAAgB,CACvB,AACD,qFACU,gBAAkB,CAC3B,AACD,8CACM,YAAa,AACb,gBAAkB,CACvB,AACD,gDACQ,eAAgB,AAChB,cAAe,AACf,gBAAiB,AACjB,0BAA2B,AAC3B,gBAAkB,CACzB,AACD,sDACQ,cAAgB,CACvB,AACD,oDACM,WAAa,AACb,oBAAsB,CAC3B,AACD,oCACI,UAAW,AACX,WAAa,CAChB,AACD,uCACI,YAAa,AACb,gBAAkB,CACrB,AACD,qDACM,2BAA6B,AAC7B,eAAiB,CACtB,AACD,4DACM,WAAY,AACZ,WAAY,AACZ,gBAAiB,AACjB,eAAiB,CACtB,AACD,8DACM,qBAAwB,CAC7B,AACD,8BACI,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,iBAAkB,AAClB,iBAAmB,CACtB,AACD,0CACI,gBAAiB,AACjB,uBAAwB,AACxB,gBAAiB,AACjB,eAAiB,CACpB,AACD,oCACI,eAAiB,CACpB,AACD,qDACM,YAAa,AACb,2BAA6B,CAClC,AACD,0CACM,iBAAkB,AAClB,oBAAsB,CAC3B,AACD,gDACQ,WAAa,CACpB,AACD,iDACQ,qBAAsB,AACtB,UAAY,CACnB,AACD,mDACQ,YAAa,AACb,qBAAsB,AACtB,WAAa,CACpB,AACD,mDACI,mBAAqB,CACxB,AACD,mDACI,UAAW,AACX,WAAa,CAChB,AACD,sCACI,WAAa,CAChB",file:"warehouse-inventory.vue",sourcesContent:["\n.warehouse-inventory {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n.warehouse-inventory .inventory-list-container {\n    width: 100%;\n    height: 100%;\n    padding-left: 272px;\n}\n.warehouse-inventory .file {\n    position: relative;\n}\n.warehouse-inventory .file .label {\n      display: inline-block;\n      height: 26px;\n      line-height: 26px;\n      background-color: #e26829;\n      border-radius: 26px;\n      padding-left: 25px;\n      padding-right: 30px;\n}\n.warehouse-inventory .file span {\n      display: block;\n      width: 400px;\n      height: 20px;\n      margin: 10px 5px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      -o-text-overflow: ellipsis;\n      white-space: nowrap;\n}\n.warehouse-inventory .file .file-input {\n      width: 300px;\n      position: absolute;\n      left: 0;\n      top: 0;\n      opacity: 0;\n      z-index: 2;\n}\n.warehouse-inventory span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.warehouse-inventory .category-tree {\n    position: absolute;\n    left: 0;\n    top: 0;\n    overflow: auto;\n    width: 272px;\n    height: 100%;\n    background: rgba(39, 43, 55, 0.75);\n    border-right: 1px solid #383d49;\n}\n.warehouse-inventory .category-tree .searchWrap {\n      background: #383d49;\n      height: 60px;\n}\n.warehouse-inventory .category-tree .searchWrap .demo-form-inline {\n        padding-top: 10px;\n}\n.warehouse-inventory .category-tree .el-tree {\n      width: 270px;\n}\n.warehouse-inventory .category-tree .tree-node {\n      white-space: nowrap;\n}\n.warehouse-inventory .category-tree .tree-node .tree-node__content {\n        height: 50px;\n        line-height: 50px;\n        padding-left: 0;\n        cursor: pointer;\n}\n.warehouse-inventory .category-tree .tree-node .tree-node__content .tree-node__label {\n          padding-left: 6px;\n}\n.warehouse-inventory .category-tree .tree-btn {\n      height: 50px;\n      line-height: 50px;\n}\n.warehouse-inventory .category-tree .tree-btn a {\n        font-size: 14px;\n        color: #e26829;\n        font-weight: 500;\n        text-decoration: underline;\n        margin-left: 26px;\n}\n.warehouse-inventory .category-tree .tree-btn a:hover {\n        cursor: pointer;\n}\n.warehouse-inventory .category-tree .training-btn a {\n      color: white;\n      text-decoration: none;\n}\n.warehouse-inventory .search-header {\n    padding: 0;\n    height: 60px;\n}\n.warehouse-inventory .list-form-inline {\n    height: 100%;\n    line-height: 50px;\n}\n.warehouse-inventory .list-form-inline .el-form-item {\n      margin-right: 2px !important;\n      margin-bottom: 0;\n}\n.warehouse-inventory .list-form-inline .el-form-item__label {\n      color: #fff;\n      width: 80px;\n      margin-left: 5px;\n      text-align: left;\n}\n.warehouse-inventory .list-form-inline .el-form-item__content {\n      width: 180px !important;\n}\n.warehouse-inventory .loading {\n    width: 100px;\n    height: 100px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -50px;\n    margin-left: -50px;\n}\n.warehouse-inventory .table-wrap .long-td {\n    max-width: 270px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    text-align: left;\n}\n.warehouse-inventory .dialog-import {\n    overflow: hidden;\n}\n.warehouse-inventory .dialog-import .el-dialog__body {\n      font-size: 0;\n      padding: 30px 20px 30px 66px;\n}\n.warehouse-inventory .dialog-import .item {\n      line-height: 30px;\n      display: inline-block;\n}\n.warehouse-inventory .dialog-import .item .land {\n        width: 250px;\n}\n.warehouse-inventory .dialog-import .item .title {\n        display: inline-block;\n        width: 80px;\n}\n.warehouse-inventory .dialog-import .item .content {\n        margin: 10px;\n        display: inline-block;\n        width: 250px;\n}\n.warehouse-inventory .cascader .el-cascader__label {\n    line-height: inherit;\n}\n.warehouse-inventory .cascader ::-webkit-scrollbar {\n    width: 5px;\n    height: 14px;\n}\n.warehouse-inventory .el-input-number {\n    width: 220px;\n}\n"],sourceRoot:""}])},2445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(194)),o=s(n(195)),a=s(n(3)),r=s(n(766)),l=s(n(2446));function s(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{loading:!1,formSearch:{warehouse_id:"",category_root_id:"",item_code:""},headData:[],tableList:[],currentPage:1,total:0,currentID:"",warehouseList:[],options:[],props:{label:"name",value:"id",children:"warehouse"},cascaderValue:[],categoryList:[],defaultProps:{id:"id",label:"name"},categoryExId:[],part_no:"",dialogImportVisible:!1,areaList:[],areaId:"",file:"",fileName:""}},i18n:{messages:{}},created:function(){var e=(0,o.default)(i.default.mark(function e(){var t=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.getAllArea().then(function(e){t.areaList=e.data});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:{},mounted:function(){var e=this,t=this;this.headData=["Item Name","Item Code","Warehouse","Area","Location No.","On Hand Quantity","Allocated Quantity","Picked Quantity","Pallet No.","Carton No."],this.loading=!0,r.default.getAllCategory().then(function(e){t.categoryList=e.category_list,t.loading=!1}),this.getWarehouseInventory(),t.loading=!0,t.getAllRegion().then(function(n){if(-2===n.code)throw n.message;return e.options=n.map(function(e){return{name:e.warehouse_region_name,id:e.id,warehouse:[]}}),t.getAllWarehouse()}).then(function(n){if(-2===n.code)throw n.message;var i=n;e.warehouseList=n,e.options.forEach(function(e){e.warehouse=i.filter(function(t){return t.region_id===e.id}).map(function(e){return{name:e.name,id:e.id}}),t.loading=!1})}).catch(function(e){t.$message({message:e,type:"error"}),t.loading=!1})},methods:{warehousePipe:function(e){if(this.warehouseList.length>0){var t=this.warehouseList.filter(function(t){return t.id===e.warehouse_id});return t.length>0?t[0].name:"-"}},importInvitation:function(){var e=this;if(this.areaId)if(this.file){var t=new FormData;t.append("file",this.file),l.default.uploadBitchInventory(t,{area_id:this.areaId}).then(function(t){e.$message({message:"Import Successfully",type:"success"}),e.dialogImportVisible=!1},function(t){e.$message({message:t,type:"error"}),e.dialogImportVisible=!1})}else this.$message({message:"Please select the file",type:"warning"});else this.$message({message:"Please add the area",type:"warning"})},onChangeUpdateFile:function(){this.$refs.fileUpdate.files.length>0?(this.file=this.$refs.fileUpdate.files[0],this.fileName=this.file.name,console.log(this.file)):(this.file=null,this.fileName="")},handleNodeClick:function(e){e.hasOwnProperty("id")&&(this.formSearch.category_root_id=e.id,this.getWarehouseInventory())},getItemModel:function(){this.part_no&&(this.formSearch.item_code=this.part_no,this.getWarehouseInventory())},handleItemChange:function(e){this.formSearch.warehouse_id=e[1],this.getWarehouseInventory()},goAfterIndex:function(){this.$router.push({name:"afterIndex"})},onSearch:function(){this.getWarehouseInventory()},onClean:function(){this.cascaderValue=[],this.formSearch={warehouse_id:""},this.getWarehouseInventory()},onImport:function(){this.dialogImportVisible=!0,this.areaId="",this.file=null,this.fileName=""},handleCurrentChange:function(e){this.currentPage=e,a.default.Data.set(a.default.Const.DATA.KEY_AFTER_SALES_PAGE,this.currentPage),this.getWarehouseInventory()},getAllWarehouse:function(){return a.default.Api.request({method:"GET",url:"/nl/warehouse/all"})},getAllRegion:function(){return a.default.Api.request({method:"GET",url:"/nl/warehouse/region/all"})},getWarehouseInventory:function(){var e=this;this.loading=!0,a.default.Api.request({method:"post",url:"/nl/warehouse/inventory/findByCategoryRootId",data:{},params:{page:this.currentPage,size:10,warehouseId:this.formSearch.warehouse_id,categoryRootId:this.formSearch.category_root_id,itemCode:this.formSearch.item_code}}).then(function(t){if(-2===t.code)throw t.message;e.tableList=t.content,e.total=t.totalElements,e.loading=!1}).catch(function(e){scope.$message({message:e,type:"error"}),scope.loading=!1})}},watch:{}}},2446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(3),a=(i=o)&&i.__esModule?i:{default:i};var r={uploadBitchInventory:function(e,t){return a.default.HttpHelp.request({method:"POST",url:"/nl/warehouse/inventory/upload-bitch-inventory",data:e,params:t})}};t.default=r},2447:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"warehouse-inventory"},[n("div",{staticClass:"category-tree"},[n("div",{staticClass:"searchWrap"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"Item Code"},model:{value:e.part_no,callback:function(t){e.part_no=t},expression:"part_no"}}),e._v(" "),n("div",{staticClass:"btn-group-inline"},[n("div",{staticClass:"icons"},[n("span",{staticClass:"icon-item search",attrs:{title:"search"},on:{click:e.getItemModel}})])])],1)],1)],1),e._v(" "),n("el-tree",{attrs:{data:e.categoryList,props:e.defaultProps,"node-key":"id","default-expanded-keys":e.categoryExId},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),n("div",{staticClass:"inventory-list-container"},[n("div",{staticClass:"search-header"},[n("el-form",{staticClass:"list-form-inline",attrs:{inline:!0,model:e.formSearch}},[n("el-form-item",{attrs:{label:"Warehouse"}},[n("el-cascader",{staticClass:"cascader",attrs:{options:e.options,filterable:"",props:e.props,value:e.cascaderValue},on:{change:e.handleItemChange}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Category"}},[n("el-select",{attrs:{placeholder:"Category"},model:{value:e.formSearch.category_root_id,callback:function(t){e.$set(e.formSearch,"category_root_id",t)},expression:"formSearch.category_root_id"}},e._l(e.categoryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"Item Code"}},[n("el-input",{staticClass:"input",attrs:{placeholder:"Item Code"},model:{value:e.formSearch.item_code,callback:function(t){e.$set(e.formSearch,"item_code",t)},expression:"formSearch.item_code"}})],1),e._v(" "),n("div",{staticClass:"btn-group-inline-icon"},[n("div",{staticClass:"icons"},[n("div",{staticClass:"icon-item search",attrs:{title:"search"},on:{click:e.onSearch}}),e._v(" "),n("div",{staticClass:"icon-item clear",attrs:{title:"clear"},on:{click:e.onClean}}),e._v(" "),n("div",{staticClass:"icon-item upload",attrs:{title:"upload"},on:{click:e.onImport}})])])],1)],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-wrap"},[n("div",{staticClass:"table-content-holder"},[e.tableList.length<=0&&!e.loading?n("div",{staticClass:"no-data-content"},[e._v("noResult")]):n("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[n("thead",e._l(e.headData,function(t,i){return n("td",{key:i},[e._v(e._s(t))])}),0),e._v(" "),!e.loading&&e.tableList.length>0?n("tbody",e._l(e.tableList,function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.item_name))]),e._v(" "),n("td",[e._v(e._s(t.item_code))]),e._v(" "),n("td",[e._v(e._s(e.warehousePipe(t)))]),e._v(" "),n("td",[e._v(e._s(t.areaName))]),e._v(" "),n("td",[e._v(e._s(t.location_no))]),e._v(" "),n("td",[e._v(e._s(t.on_hand_quantity))]),e._v(" "),n("td",[e._v(e._s(t.allocated_quantity))]),e._v(" "),n("td",[e._v(e._s(t.picked_quantity))]),e._v(" "),n("td",[e._v(e._s(t.pallet_no))]),e._v(" "),n("td",[e._v(e._s(t.carton_no))])])}),0):e._e()])]),e._v(" "),n("div",{staticClass:"table-footer"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),e._v(" "),n("p",{staticClass:"total"},[e._v("total: "+e._s(e.total))])],1)])]),e._v(" "),n("el-dialog",{staticClass:"dialog-import",attrs:{title:"Import File",visible:e.dialogImportVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogImportVisible=t}}},[n("div",{staticClass:"item"},[n("label",{staticClass:"title"},[e._v("\n                Area\n                "),n("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),n("div",{staticClass:"content"},[n("el-select",{attrs:{placeholder:"Area"},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}},e._l(e.areaList,function(e){return n("el-option",{key:e.id,attrs:{label:e.area_name,value:e.id}})}),1)],1)]),e._v(" "),n("div",{staticClass:"file"},[n("label",{staticClass:"label",attrs:{for:"fileToImport"}},[e._v("fileToImport")]),e._v(" "),n("br"),e._v(" "),n("span",[e._v(e._s(e.fileName))]),e._v(" "),n("input",{ref:"fileUpdate",staticClass:"file-input",attrs:{id:"uploadFile",type:"file"},on:{change:function(t){return e.onChangeUpdateFile()}}})]),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.importInvitation}},[e._v("yes")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogImportVisible=!1}}},[e._v("no")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=34.c14e7232520a6bdf746b.js.map