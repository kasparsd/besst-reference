webpackJsonp([73],{2315:function(t,e,i){var n=i(2)(i(2572),i(2573),function(t){i(2570)},null,null);t.exports=n.exports},2570:function(t,e,i){var n=i(2571);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(2279)("a1315c82",n,!0,{})},2571:function(t,e,i){(t.exports=i(2278)(!0)).push([t.i,".department-list{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%}.department-list span.required{color:#e26829;display:inline-block}.department-list .list-form-inline{height:100%;line-height:50px}.department-list .list-form-inline .el-form-item{margin-right:2px!important;margin-bottom:0}.department-list .list-form-inline .el-form-item__content{width:180px!important}.department-list .table-wrap .long-td{max-width:270px;text-overflow:ellipsis;overflow:hidden;text-align:left}.department-list .dialog-department{overflow:hidden}.department-list .dialog-department .el-dialog__body{font-size:0}.department-list .dialog-department .item{width:50%;line-height:30px;display:inline-block}.department-list .dialog-department .item .land{width:250px}.department-list .dialog-department .item .title{display:inline-block;width:85px}.department-list .dialog-department .item .content{margin:10px;display:inline-block;width:250px}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl/department/department-list.vue"],names:[],mappings:"AACA,iBACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,sBAAuB,AAC/B,WAAY,AACZ,WAAa,CACd,AACD,+BACI,cAAe,AACf,oBAAsB,CACzB,AACD,mCACI,YAAa,AACb,gBAAkB,CACrB,AACD,iDACM,2BAA6B,AAC7B,eAAiB,CACtB,AACD,0DACM,qBAAwB,CAC7B,AACD,sCACI,gBAAiB,AACjB,uBAAwB,AACxB,gBAAiB,AACjB,eAAiB,CACpB,AACD,oCACI,eAAiB,CACpB,AACD,qDACM,WAAa,CAClB,AACD,0CACM,UAAW,AACX,iBAAkB,AAClB,oBAAsB,CAC3B,AACD,gDACQ,WAAa,CACpB,AACD,iDACQ,qBAAsB,AACtB,UAAY,CACnB,AACD,mDACQ,YAAa,AACb,qBAAsB,AACtB,WAAa,CACpB",file:"department-list.vue",sourcesContent:["\n.department-list {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n.department-list span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.department-list .list-form-inline {\n    height: 100%;\n    line-height: 50px;\n}\n.department-list .list-form-inline .el-form-item {\n      margin-right: 2px !important;\n      margin-bottom: 0;\n}\n.department-list .list-form-inline .el-form-item__content {\n      width: 180px !important;\n}\n.department-list .table-wrap .long-td {\n    max-width: 270px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    text-align: left;\n}\n.department-list .dialog-department {\n    overflow: hidden;\n}\n.department-list .dialog-department .el-dialog__body {\n      font-size: 0;\n}\n.department-list .dialog-department .item {\n      width: 50%;\n      line-height: 30px;\n      display: inline-block;\n}\n.department-list .dialog-department .item .land {\n        width: 250px;\n}\n.department-list .dialog-department .item .title {\n        display: inline-block;\n        width: 85px;\n}\n.department-list .dialog-department .item .content {\n        margin: 10px;\n        display: inline-block;\n        width: 250px;\n}\n"],sourceRoot:""}])},2572:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(20)),a=l(i(3));function l(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{loading:!1,formInline:{parentType:""},headData:[],tableList:[],currentPage:1,total:0,department:{fax:"",name:"",parent_id:"",phone:"",remark:"",tel:"",type:0},dialogTitle:"",dialogDepartmentVisible:!1,dialogDeleteVisible:!1,currentID:"",parentTypeList:[{id:0,value:0,label:"Sales"},{id:1,value:1,label:"Finance"},{id:2,value:2,label:"Warehouse"}]}},i18n:{messages:{}},created:function(){},computed:{},mounted:function(){this.getDepartment(),this.headData=["ID","Name","Parent ID","Type","Phone","Tel","Fax","Remark","Operation"]},methods:{parentType:function(t){if(this.parentTypeList.length>0){var e=this.parentTypeList.filter(function(e){return e.id===t.type});return e.length>0?e[0].label:"-"}},goAfterIndex:function(){this.$router.push({name:"afterIndex"})},onSearch:function(){this.getDepartment()},onClean:function(){this.formInline.parentType="",this.getDepartment()},onEdit:function(t){this.department=JSON.parse((0,n.default)(t)),this.dialogTitle="Update Department",this.dialogDepartmentVisible=!0},onDelete:function(t){this.currentID=t.id,this.dialogDeleteVisible=!0},handleCurrentChange:function(t){this.currentPage=t,a.default.Data.set(a.default.Const.DATA.KEY_AFTER_SALES_PAGE,this.currentPage),this.getDepartment()},dialogAdd:function(){this.dialogTitle="Add Department",this.dialogDepartmentVisible=!0,this.department={parent_id:"",type:0,name:"",phone:"",remark:"",tel:"",fax:""}},deleteInvitation:function(){var t=this,e=this;e.loading=!0,this.deleteDepartment(e.currentID).then(function(i){e.loading=!1,t.dialogDeleteVisible=!1,e.getDepartment()},function(t){e.loading=!1,e.dialogDeleteVisible=!1})},dialogConfirm:function(){var t=this;this.required()&&(this.loading=!0,this.postDepartment(this.department).then(function(e){t.loading=!1,t.getDepartment(),t.dialogDepartmentVisible=!1},function(e){t.loading=!1,t.dialogDepartmentVisible=!1}))},dialogCancel:function(){this.dialogDepartmentVisible=!1,this.department={}},getDepartment:function(){var t=this;this.loading=!0;var e=this;a.default.Api.request({method:"POST",url:"/nl/public/department/filter",data:{type:this.formInline.parentType},parmas:{page:this.currentPage,size:10}}).then(function(i){e.loading=!1,t.tableList=i.content,t.total=i.totalElements},function(t){e.loading=!1})},postDepartment:function(t){return a.default.Api.request({method:"POST",url:"/nl/public/department",data:t})},deleteDepartment:function(t){return a.default.Api.request({method:"DELETE",url:"/nl/public/department/"+t})},required:function(){return""===this.department.name?(this.$message({message:"Please input Name",type:"warning"}),!1):""===this.department.parent_id?(this.$message({message:"Please input Parent ID",type:"warning"}),!1):""===this.department.phone?(this.$message({message:"Please input Phone",type:"warning"}),!1):""===this.department.tel?(this.$message({message:"Please input Tel",type:"warning"}),!1):""!==this.department.fax||(this.$message({message:"Please input Fax",type:"warning"}),!1)}},watch:{}}},2573:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"department-list"},[i("div",{staticClass:"search-header"},[i("el-form",{staticClass:"list-form-inline",attrs:{inline:!0,model:t.formInline}},[i("el-form-item",{attrs:{label:"Parent Type"}},[i("el-select",{staticClass:"land",attrs:{placeholder:"Parent Type"},model:{value:t.formInline.parentType,callback:function(e){t.$set(t.formInline,"parentType",e)},expression:"formInline.parentType"}},t._l(t.parentTypeList,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",{staticClass:"btn-group-inline-icon"},[i("div",{staticClass:"icons"},[i("div",{staticClass:"icon-item search",attrs:{title:"search"},on:{click:t.onSearch}}),t._v(" "),i("div",{staticClass:"icon-item clear",attrs:{title:"clear"},on:{click:t.onClean}})])])],1),t._v(" "),i("div",{staticClass:"btn-group-top"},[i("div",{staticClass:"icons"},[i("div",{directives:[{name:"ilpermission",rawName:"v-ilpermission",value:"department-add",expression:"'department-add'"}],staticClass:"icon-item add-v2",attrs:{title:"add"},on:{click:t.dialogAdd}})])])],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-wrap"},[i("div",{staticClass:"table-content-holder"},[t.tableList.length<=0&&!t.loading?i("div",{staticClass:"no-data-content"},[t._v("noResult")]):i("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[i("thead",t._l(t.headData,function(e,n){return i("td",{key:n},[t._v(t._s(e))])}),0),t._v(" "),!t.loading&&t.tableList.length>0?i("tbody",t._l(t.tableList,function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.id))]),t._v(" "),i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",[t._v(t._s(e.parent_id))]),t._v(" "),i("td",[t._v(t._s(t.parentType(e)))]),t._v(" "),i("td",[t._v(t._s(e.phone))]),t._v(" "),i("td",[t._v(t._s(e.tel))]),t._v(" "),i("td",[t._v(t._s(e.fax))]),t._v(" "),i("td",[t._v(t._s(e.remark))]),t._v(" "),i("td",[i("a",{directives:[{name:"ilpermission",rawName:"v-ilpermission",value:"department-add",expression:"'department-add'"}],staticClass:"btn-underline",on:{click:function(i){return i.stopPropagation(),t.onEdit(e)}}},[t._v("edit")]),t._v(" "),i("a",{directives:[{name:"ilpermission",rawName:"v-ilpermission",value:"department-delete",expression:"'department-delete'"}],staticClass:"btn-underline",on:{click:function(i){return i.stopPropagation(),t.onDelete(e)}}},[t._v("delete")])])])}),0):t._e()])]),t._v(" "),i("div",{staticClass:"table-footer"},[i("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),t._v(" "),i("p",{staticClass:"total"},[t._v("total: "+t._s(t.total))])],1)]),t._v(" "),i("el-dialog",{staticClass:"dialog-department",attrs:{title:t.dialogTitle,visible:t.dialogDepartmentVisible,"custom-class":"edit-dialog"},on:{"update:title":function(e){t.dialogTitle=e},"update:visible":function(e){t.dialogDepartmentVisible=e}}},[i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("\n        Name\n        "),i("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{model:{value:t.department.name,callback:function(e){t.$set(t.department,"name",e)},expression:"department.name"}})],1)]),t._v(" "),i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("\n        Parent Type\n        "),i("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),i("div",{staticClass:"content"},[i("el-select",{staticClass:"land",attrs:{placeholder:"Parent Type"},model:{value:t.department.type,callback:function(e){t.$set(t.department,"type",e)},expression:"department.type"}},t._l(t.parentTypeList,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("\n        Parent ID\n        "),i("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{model:{value:t.department.parent_id,callback:function(e){t.$set(t.department,"parent_id",e)},expression:"department.parent_id"}})],1)]),t._v(" "),i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("\n        Phone\n        "),i("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{model:{value:t.department.phone,callback:function(e){t.$set(t.department,"phone",e)},expression:"department.phone"}})],1)]),t._v(" "),i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("\n        Tel\n        "),i("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{model:{value:t.department.tel,callback:function(e){t.$set(t.department,"tel",e)},expression:"department.tel"}})],1)]),t._v(" "),i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("\n        Fax\n        "),i("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{model:{value:t.department.fax,callback:function(e){t.$set(t.department,"fax",e)},expression:"department.fax"}})],1)]),t._v(" "),i("div",{staticClass:"item"},[i("label",{staticClass:"title"},[t._v("Remark")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{model:{value:t.department.remark,callback:function(e){t.$set(t.department,"remark",e)},expression:"department.remark"}})],1)]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"preview"},on:{click:t.dialogConfirm}},[t._v("confirm")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.dialogCancel}},[t._v("cancel")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"Delete Permission",visible:t.dialogDeleteVisible,size:"tiny"},on:{"update:visible":function(e){t.dialogDeleteVisible=e}}},[i("p",[t._v("Are you sure to delete it ?")]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.deleteInvitation}},[t._v("yes")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogDeleteVisible=!1}}},[t._v("no")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=73.944dc4075e139ec45701.js.map