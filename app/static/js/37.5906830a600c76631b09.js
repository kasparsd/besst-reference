webpackJsonp([37],{2322:function(t,e,a){var i=a(2)(a(2605),a(2606),function(t){a(2603)},null,null);t.exports=i.exports},2413:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=a(3),s=(i=n)&&i.__esModule?i:{default:i};var l={filterCustomerPI:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.HttpHelp.request({method:"POST",url:"/nl/sales/proformaInvoice/filter",data:{customer_id:t,status:e},params:{page:1,size:999}})},filterCustomerPIDetail:function(t){return s.default.HttpHelp.request({method:"POST",url:"/nl/sales/proformaInvoice/detail/filter",data:{pi_no:t},params:{page:1,size:999}})},printPI:function(t){return s.default.HttpHelp.request({method:"POST",url:"/nl/sales/proformaInvoice/print_PI",params:{id:t},responseType:"blob"})}};e.default=l},2603:function(t,e,a){var i=a(2604);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(2279)("09b06ce3",i,!0,{})},2604:function(t,e,a){(t.exports=a(2278)(!0)).push([t.i,".PI-details{width:100%;height:100%}.PI-details span.required{color:#e26829;display:inline-block}.PI-details .el-form-item{margin-right:2px!important;margin-bottom:0}.PI-details .el-form-item__label{color:#fff;width:83px;text-align:left;margin-left:5px}.PI-details .el-form-item__content{width:180px!important}.PI-details .content-width{min-width:1246px}.PI-details .content{border:1px solid #2b2f3b;margin:20px auto 0}.PI-details .content .order-info{width:100%}.PI-details .content .order-info .title{height:50px;line-height:50px;padding-left:40px}.PI-details .content .order-info .left{float:left;width:100%;height:345px;background:#353945;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b;border-bottom:1px solid #2b2f3b}.PI-details .content .order-info .left .item{line-height:60px;overflow:hidden;width:49%;height:50px;display:inline-block}.PI-details .content .order-info .left .item .label{display:inline-block;width:110px;margin-left:15px}.PI-details .content .order-info .left .item span{display:inline-block}.PI-details .parts-list{position:relative;text-align:right;padding:0 40px;font-size:12px;overflow:hidden;height:50px;line-height:50px;width:100%;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b}.PI-details .parts-list .att-total{display:inline-block;position:absolute;top:0;right:44px;color:#e26829}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl/sales/proforma-invoice-details.vue"],names:[],mappings:"AACA,YACE,WAAY,AACZ,WAAa,CACd,AACD,0BACI,cAAe,AACf,oBAAsB,CACzB,AACD,0BACI,2BAA6B,AAC7B,eAAiB,CACpB,AACD,iCACI,WAAY,AACZ,WAAY,AACZ,gBAAiB,AACjB,eAAiB,CACpB,AACD,mCACI,qBAAwB,CAC3B,AACD,2BACI,gBAAkB,CACrB,AACD,qBACI,yBAA0B,AAC1B,kBAAyB,CAC5B,AACD,iCACM,UAAY,CACjB,AACD,wCACQ,YAAa,AACb,iBAAkB,AAClB,iBAAmB,CAC1B,AACD,uCACQ,WAAY,AACZ,WAAY,AACZ,aAAc,AACd,mBAAoB,AACpB,kCAAmC,AAC3B,0BAA2B,AACnC,+BAAiC,CACxC,AACD,6CACU,iBAAkB,AAClB,gBAAiB,AACjB,UAAW,AACX,YAAa,AACb,oBAAsB,CAC/B,AACD,oDACY,qBAAsB,AACtB,YAAa,AACb,gBAAkB,CAC7B,AACD,kDACY,oBAAsB,CACjC,AACD,wBACI,kBAAmB,AACnB,iBAAkB,AAClB,eAAgB,AAChB,eAAgB,AAChB,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,WAAY,AACZ,kCAAmC,AAC3B,yBAA2B,CACtC,AACD,mCACM,qBAAsB,AACtB,kBAAmB,AACnB,MAAO,AACP,WAAY,AACZ,aAAe,CACpB",file:"proforma-invoice-details.vue",sourcesContent:["\n.PI-details {\n  width: 100%;\n  height: 100%;\n}\n.PI-details span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.PI-details .el-form-item {\n    margin-right: 2px !important;\n    margin-bottom: 0;\n}\n.PI-details .el-form-item__label {\n    color: #fff;\n    width: 83px;\n    text-align: left;\n    margin-left: 5px;\n}\n.PI-details .el-form-item__content {\n    width: 180px !important;\n}\n.PI-details .content-width {\n    min-width: 1246px;\n}\n.PI-details .content {\n    border: 1px solid #2b2f3b;\n    margin: 20px auto 0 auto;\n}\n.PI-details .content .order-info {\n      width: 100%;\n}\n.PI-details .content .order-info .title {\n        height: 50px;\n        line-height: 50px;\n        padding-left: 40px;\n}\n.PI-details .content .order-info .left {\n        float: left;\n        width: 100%;\n        height: 345px;\n        background: #353945;\n        -webkit-box-shadow: 0 -1px #2b2f3b;\n                box-shadow: 0 -1px #2b2f3b;\n        border-bottom: 1px solid #2b2f3b;\n}\n.PI-details .content .order-info .left .item {\n          line-height: 60px;\n          overflow: hidden;\n          width: 49%;\n          height: 50px;\n          display: inline-block;\n}\n.PI-details .content .order-info .left .item .label {\n            display: inline-block;\n            width: 110px;\n            margin-left: 15px;\n}\n.PI-details .content .order-info .left .item span {\n            display: inline-block;\n}\n.PI-details .parts-list {\n    position: relative;\n    text-align: right;\n    padding: 0 40px;\n    font-size: 12px;\n    overflow: hidden;\n    height: 50px;\n    line-height: 50px;\n    width: 100%;\n    -webkit-box-shadow: 0 -1px #2b2f3b;\n            box-shadow: 0 -1px #2b2f3b;\n}\n.PI-details .parts-list .att-total {\n      display: inline-block;\n      position: absolute;\n      top: 0;\n      right: 44px;\n      color: #e26829;\n}\n"],sourceRoot:""}])},2605:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=p(a(20)),n=p(a(3)),s=(p(a(90)),p(a(7))),l=p(a(5)),o=p(a(9)),r=p(a(10)),d=p(a(8)),A=p(a(2413)),c=p(a(767));function p(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{loading:!1,headData:[],total:0,orderId:0,customerList:[],formData:{},orderItems:[],currency:"",currencies:[{currency:1,label:"€"},{currency:2,label:"$"},{currency:3,label:"DM."},{currency:4,label:"￥"},{currency:5,label:"￡"}]}},i18n:{messages:{fr:d.default.Component.Order.Save,en:l.default.Component.Order.Save,zh:s.default.Component.Order.Save,de:o.default.Component.Order.Save,nl:r.default.Component.Order.Save}},created:function(){},computed:{totalCount:function(){var t=0;return this.orderItems.forEach(function(e){t+=e.amount}),Math.round(100*t)/100}},mounted:function(){var t=this;this.headData=["Item Name","BF Art No.","Customer Art No.","Description","Unit Price","VAT rate","Quantity","Amount"],this.loading=!0,this.getAllCustomer().then(function(e){if(-2===e.code)throw e.message;t.customerList=e,t.loading=!1}).catch(function(e){t.$message({message:e,type:"error"}),t.dialogVisible=!0,t.loading=!1});var e=this;e.orderId=this.$route.query.orderId,e.lodaing=!0,e.getPIById(e.orderId).then(function(t){return e.formData=JSON.parse((0,i.default)(t)),e.formData.date=n.default.Util.changeDateForm(1e3*e.formData.date),e.formData.etd=n.default.Util.changeDateForm(1e3*e.formData.etd),e.filterPIDetails(e.formData.pi_no)}).then(function(t){e.orderItems=t.content.map(function(t){return e.currency=t.currency,t.item_part_no=t.item_code,t}),e.loading=!1}).catch(function(t){e.$message({message:t.message,type:"error"}),e.loading=!1})},methods:{goPIList:function(){this.$router.push({name:"PIList"})},getAllCustomer:function(){return n.default.Api.request({method:"GET",url:"/nl/nlPublic/company/all"})},getPIById:function(t){return n.default.Api.request({method:"GET",url:"/nl/sales/proformaInvoice/"+t})},filterPIDetails:function(t){return n.default.Api.request({method:"POST",url:"/nl/sales/proformaInvoice/detail/filter",data:{pi_no:t},params:{page:1,size:999}})},onPrint:function(){var t=this;A.default.printPI(this.orderId).then(function(e){var a=new Date,i=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDay(),n=t.formData.pi_no||i;(0,c.default)(e.data,n+".pdf")})}},watch:{}}},2606:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PI-details"},[a("div",{staticClass:"header"},[a("div",{staticClass:"btn-group-inline"},[a("div",{staticClass:"icons"},[a("div",{staticClass:"icon-item back",attrs:{title:"back"},on:{click:t.goPIList}})])]),t._v(" "),a("div",{staticClass:"btn-group-top"},[a("div",{staticClass:"icons"},[a("div",{staticClass:"icon-item print",attrs:{title:"print"},on:{click:t.onPrint}})])]),t._v(" "),a("label",{staticClass:"title"},[t._v("Proforma Invoice Details")])]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"content content-width"},[a("div",{staticClass:"order-info"},[a("label",{staticClass:"title"},[t._v("Proforma Invoice Info")]),t._v(" "),a("div",{staticClass:"left"},[a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("PI No.")]),t._v(" "),a("span",[t._v(t._s(t.formData.pi_no))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Sales")]),t._v(" "),a("span",[t._v(t._s(t.formData.sales_name))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Customer")]),t._v(" "),a("span",[t._v(t._s(t.formData.customer_name))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Country")]),t._v(" "),a("span",[t._v(t._s(t.formData.country))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Address")]),t._v(" "),a("span",[t._v(t._s(t.formData.address))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Tel")]),t._v(" "),a("span",[t._v(t._s(t.formData.country_code)+" "+t._s(t.formData.telephone))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("VAT No.")]),t._v(" "),a("span",[t._v(t._s(t.formData.vat_no))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("ETD")]),t._v(" "),a("span",[t._v(t._s(t.formData.etd))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Trade Terms")]),t._v(" "),a("span",[t._v(t._s(t.formData.trade_terms))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Payment Term")]),t._v(" "),a("span",[t._v(t._s(t.formData.payment_term))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Date")]),t._v(" "),a("span",[t._v(t._s(t.formData.date))])]),t._v(" "),a("div",{staticClass:"item"},[a("label",{staticClass:"label"},[t._v("Currency/Amount")]),t._v(" "),a("span",[t._v(t._s(t._f("currencyType")(t.formData.currency))+t._s(t.formData.amount))])])])]),t._v(" "),a("div",{staticClass:"table-wrap table-overflow"},[a("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("thead",t._l(t.headData,function(e){return a("td",[t._v(t._s(e))])}),0),t._v(" "),a("tbody",t._l(t.orderItems,function(e,i){return a("tr",[a("td",[t._v(t._s(e.model_name))]),t._v(" "),a("td",[t._v(t._s(e.bf_art_no))]),t._v(" "),a("td",[t._v(t._s(e.customer_art_no))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(t._f("currencyType")(e.currency))+t._s(e.unit_price))]),t._v(" "),a("td",[t._v(t._s(e.vat_rate)+"%")]),t._v(" "),a("td",[t._v(t._s(e.quantity))]),t._v(" "),a("td",[t._v(t._s(e.amount))])])}),0)])]),t._v(" "),a("div",{staticClass:"parts-list"},[a("span",{staticClass:"att-total"},[t._v("total: "+t._s(t._f("currencyType")(t.currency))+t._s(t.totalCount))])])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=37.5906830a600c76631b09.js.map