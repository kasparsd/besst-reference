webpackJsonp([59],{2305:function(t,e,n){var o=n(2)(n(2532),n(2533),function(t){n(2530)},null,null);t.exports=o.exports},2530:function(t,e,n){var o=n(2531);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(2279)("5f826857",o,!0,{})},2531:function(t,e,n){(t.exports=n(2278)(!0)).push([t.i,".shipment-allocate{width:100%;height:100%}.shipment-allocate .table-wrap{width:100%;height:calc(100% - 392px);-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b;overflow-x:hidden}.shipment-allocate span.required{color:#e26829;display:inline-block}.shipment-allocate .content-set{width:1280px}.shipment-allocate .content-wrap .content{border:1px solid #2b2f3b}.shipment-allocate .content-wrap .content .parts-list{position:relative;padding:0 40px;font-size:12px;overflow:hidden;height:50px;line-height:50px;width:100%;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b}.shipment-allocate .content-wrap .content .parts-list .att-btn{padding:6px 9px;min-width:0;margin:11px auto;display:block}.shipment-allocate .content-wrap .content .parts-list .labelAdd{margin-left:14px}.shipment-allocate .content-wrap .content .parts-list .no-data-content{display:inline-block}.shipment-allocate .content-wrap .content .parts-list .btn-box{display:inline-block;text-align:right;margin-left:15px}.shipment-allocate .content-wrap .content .footer{width:100%;height:60px;line-height:60px;padding-left:40px;-webkit-box-shadow:0 -1px #2b2f3b;box-shadow:0 -1px #2b2f3b}.shipment-allocate .content-wrap .content .footer .footer-pagination{float:right}.shipment-allocate .table-wrap .table-content{padding-bottom:0}.shipment-allocate .dialog .el-dialog--large{width:1100px}.shipment-allocate .dialog .header .search-content{width:200px;margin-right:10px}.shipment-allocate .dialog .header .search-btn{position:absolute;top:15px;left:250px;width:30px;height:30px}","",{version:3,sources:["/Users/bys/工作/Bafang/BESST/besst-client/src/views/nl/shipment-order/shipment-allocate.vue"],names:[],mappings:"AACA,mBACE,WAAY,AACZ,WAAa,CACd,AACD,+BACI,WAAY,AACZ,0BAA2B,AAC3B,kCAAmC,AAC3B,0BAA2B,AACnC,iBAAmB,CACtB,AACD,iCACI,cAAe,AACf,oBAAsB,CACzB,AACD,gCACI,YAAc,CACjB,AACD,0CACI,wBAA0B,CAC7B,AACD,sDACM,kBAAmB,AACnB,eAAgB,AAChB,eAAgB,AAChB,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,WAAY,AACZ,kCAAmC,AAC3B,yBAA2B,CACxC,AACD,+DACQ,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,aAAe,CACtB,AACD,gEACQ,gBAAkB,CACzB,AACD,uEACQ,oBAAsB,CAC7B,AACD,+DACQ,qBAAsB,AACtB,iBAAkB,AAClB,gBAAkB,CACzB,AACD,kDACM,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,kCAAmC,AAC3B,yBAA2B,CACxC,AACD,qEACQ,WAAa,CACpB,AACD,8CACI,gBAAkB,CACrB,AACD,6CACI,YAAc,CACjB,AACD,mDACI,YAAa,AACb,iBAAmB,CACtB,AACD,+CACI,kBAAmB,AACnB,SAAU,AACV,WAAY,AACZ,WAAY,AACZ,WAAa,CAChB",file:"shipment-allocate.vue",sourcesContent:["\n.shipment-allocate {\n  width: 100%;\n  height: 100%;\n}\n.shipment-allocate .table-wrap {\n    width: 100%;\n    height: calc(100% - 392px);\n    -webkit-box-shadow: 0 -1px #2b2f3b;\n            box-shadow: 0 -1px #2b2f3b;\n    overflow-x: hidden;\n}\n.shipment-allocate span.required {\n    color: #e26829;\n    display: inline-block;\n}\n.shipment-allocate .content-set {\n    width: 1280px;\n}\n.shipment-allocate .content-wrap .content {\n    border: 1px solid #2b2f3b;\n}\n.shipment-allocate .content-wrap .content .parts-list {\n      position: relative;\n      padding: 0 40px;\n      font-size: 12px;\n      overflow: hidden;\n      height: 50px;\n      line-height: 50px;\n      width: 100%;\n      -webkit-box-shadow: 0 -1px #2b2f3b;\n              box-shadow: 0 -1px #2b2f3b;\n}\n.shipment-allocate .content-wrap .content .parts-list .att-btn {\n        padding: 6px 9px;\n        min-width: 0;\n        margin: 11px auto;\n        display: block;\n}\n.shipment-allocate .content-wrap .content .parts-list .labelAdd {\n        margin-left: 14px;\n}\n.shipment-allocate .content-wrap .content .parts-list .no-data-content {\n        display: inline-block;\n}\n.shipment-allocate .content-wrap .content .parts-list .btn-box {\n        display: inline-block;\n        text-align: right;\n        margin-left: 15px;\n}\n.shipment-allocate .content-wrap .content .footer {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      padding-left: 40px;\n      -webkit-box-shadow: 0 -1px #2b2f3b;\n              box-shadow: 0 -1px #2b2f3b;\n}\n.shipment-allocate .content-wrap .content .footer .footer-pagination {\n        float: right;\n}\n.shipment-allocate .table-wrap .table-content {\n    padding-bottom: 0;\n}\n.shipment-allocate .dialog .el-dialog--large {\n    width: 1100px;\n}\n.shipment-allocate .dialog .header .search-content {\n    width: 200px;\n    margin-right: 10px;\n}\n.shipment-allocate .dialog .header .search-btn {\n    position: absolute;\n    top: 15px;\n    left: 250px;\n    width: 30px;\n    height: 30px;\n}\n"],sourceRoot:""}])},2532:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(3)),a=r(n(7)),i=r(n(5)),l=r(n(9)),s=r(n(10)),A=r(n(8));function r(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{loading:!1,tableHead:["Item Name","Item Code","Specification","Allocated Quantity","Picked Quantity","Shipped Quantity","Location No."],orderItems:[],orderId:0,warehouseList:[],isAdvice:!1,noLocation:!1}},i18n:{messages:{fr:A.default.Component.Order.Save,en:i.default.Component.Order.Save,zh:a.default.Component.Order.Save,de:l.default.Component.Order.Save,nl:s.default.Component.Order.Save}},computed:{},mounted:function(){var t=this,e=this;e.orderId=this.$route.query.orderId,e.orderId&&(e.loading=!0,e.getShipmentStatus(e.orderId).then(function(t){if(-2===t.code)throw t.message;return"Approved"===t.status_name?(e.isAdvice=!0,e.getAllocateAdvice(e.orderId)):(e.isAdvice=!1,e.getAllocate(e.orderId))}).then(function(n){if(-2===n.code)throw n.message;e.orderItems=n,e.noLocation=t.checkLocation(n),e.loading=!1}).catch(function(t){e.$message({message:t,type:"error"}),e.loading=!1}))},methods:{checkLocation:function(t){return 0===t.filter(function(t){return null===t.location_no}).length},saveAllocate:function(){var t=this,e=this,n=this.$route.query.orderId,o=this.orderItems;e.loading=!0,e.postAllocate(n,o).then(function(t){if(-2===t.code)throw t.message;return e.isAdvice=!1,e.getAllocate(n)}).then(function(n){if(-2===n.code)throw n.message;e.$message({message:"Save Successfully",type:"success"}),e.loading=!1,e.orderItems=n,e.noLocation=t.checkLocation(n),t.$router.go(-1)}).catch(function(t){e.$message({message:t,type:"error"}),e.loading=!1})},postAllocate:function(t,e){return o.default.Api.request({method:"post",url:"/nl/order/shipment/"+t+"/allocate/advice",data:e})},getAllocateAdvice:function(t){return o.default.Api.request({method:"get",url:"/nl/order/shipment/"+t+"/allocate/advice"})},getShipmentStatus:function(t){return o.default.Api.request({method:"get",url:"/nl/order/shipment/"+t+"/status"})},getAllocate:function(t){return o.default.Api.request({method:"get",url:"/nl/order/shipment/"+t+"/allocate"})}}}},2533:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shipment-allocate"},[n("div",{staticClass:"header"},[n("div",{staticClass:"btn-group-inline"},[n("div",{staticClass:"icons"},[n("div",{staticClass:"icon-item back",attrs:{title:"back"},on:{click:function(e){return t.$router.back()}}})])]),t._v(" "),n("label",{staticClass:"title"},[t._v("Shipment Allocate")])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"content-wrap"},[n("div",{staticClass:"content content-set"},[t.orderItems.length<=0&&!t.loading?n("div",{staticClass:"parts-list"},[n("div",{staticClass:"no-data-content"},[t._v("Insufficient stock, procurement or not")])]):t._e(),t._v(" "),n("div",{staticClass:"table-wrap"},[n("table",{staticClass:"table-content",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[n("thead",t._l(t.tableHead,function(e){return n("td",[t._v(t._s(e))])}),0),t._v(" "),n("tbody",t._l(t.orderItems,function(e,o){return n("tr",[n("td",[t._v(t._s(t._f("categoryRoot")(e.category_root_id)))]),t._v(" "),n("td",[t._v(t._s(e.item_code))]),t._v(" "),n("td",[t._v(t._s(e.item_name))]),t._v(" "),n("td",[t._v(t._s(e.allocated_quantity))]),t._v(" "),n("td",[t._v(t._s(e.picked_quantity))]),t._v(" "),n("td",[t._v(t._s(e.shipped_quantity))]),t._v(" "),n("td",[t._v(t._s(e.location_no||"Out of stock"))])])}),0)])]),t._v(" "),t.isAdvice?n("div",{staticClass:"footer"},[t.noLocation?n("el-button",{attrs:{type:"primary"},on:{click:t.saveAllocate}},[t._v("Save Allocate")]):t._e()],1):t._e()])])])},staticRenderFns:[]}}});
//# sourceMappingURL=59.664b1481469df001e9db.js.map